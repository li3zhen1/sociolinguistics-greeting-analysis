<head>
    <script src="https://cdn.jsdelivr.net/npm/vega@5.25.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.16.3"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.22.2"></script>
    <script>
        let data = {
            "1960": {
                "Non-question (你|您)好[啊]?": 0.6777777778,
                "Non-question (上午|下午|晚上|中午|早上)好[啊]?": 0.0333333333,
                "Question (你|您)(最近)?好[吗么没嘛啊]": 0.2555555556,
                "Question 吃[过]?[饭]?了[吗么没嘛啊]": 0.0333333333
            },
            "1970": {
                "Non-question (你|您)好[啊]?": 0.7115384615,
                "Non-question (上午|下午|晚上|中午|早上)好[啊]?": 0.0480769231,
                "Question (你|您)(最近)?好[吗么没嘛啊]": 0.2307692308,
                "Question 吃[过]?[饭]?了[吗么没嘛啊]": 0.0096153846
            },
            "1980": {
                "Non-question (你|您)好[啊]?": 0.761682243,
                "Non-question (上午|下午|晚上|中午|早上)好[啊]?": 0.0957943925,
                "Question (你|您)(最近)?好[吗么没嘛啊]": 0.1168224299,
                "Question 吃[过]?[饭]?了[吗么没嘛啊]": 0.0257009346
            },
            "1990": {
                "Non-question (你|您)好[啊]?": 0.7534626039,
                "Non-question (上午|下午|晚上|中午|早上)好[啊]?": 0.0470914127,
                "Question (你|您)(最近)?好[吗么没嘛啊]": 0.1745152355,
                "Question 吃[过]?[饭]?了[吗么没嘛啊]": 0.0249307479
            },
            "2000": {
                "Non-question (你|您)好[啊]?": 0.7542662116,
                "Non-question (上午|下午|晚上|中午|早上)好[啊]?": 0.1296928328,
                "Question (你|您)(最近)?好[吗么没嘛啊]": 0.0819112628,
                "Question 吃[过]?[饭]?了[吗么没嘛啊]": 0.0341296928
            },
            "2010": {
                "Non-question (你|您)好[啊]?": 0.8072519084,
                "Non-question (上午|下午|晚上|中午|早上)好[啊]?": 0.1106870229,
                "Question (你|您)(最近)?好[吗么没嘛啊]": 0.0610687023,
                "Question 吃[过]?[饭]?了[吗么没嘛啊]": 0.0209923664
            },
            "2020": {
                "Non-question (你|您)好[啊]?": 0.8346153846,
                "Non-question (上午|下午|晚上|中午|早上)好[啊]?": 0.0769230769,
                "Question (你|您)(最近)?好[吗么没嘛啊]": 0.0653846154,
                "Question 吃[过]?[饭]?了[吗么没嘛啊]": 0.0230769231
            }
        }
        let transformedData = [];

        for (const year in data) {
            for (const regex in data[year]) {
                transformedData.push({
                    year: year,
                    regex: regex,
                    value: data[year][regex]
                });
            }
        }

        const spec = {
            $schema: 'https://vega.github.io/schema/vega-lite/v5.json',
            description: 'Stacked Area Chart',
            data: {
                values: transformedData
            },
            width: 360,
            height: 120,
            mark: 'area',
            encoding: {
                x: {
                    field: 'year',
                    type: 'ordinal',
                    axis: {
                        title: 'Year',
                        labelAngle: -45
                    }
                },
                y: {
                    field: 'value',
                    type: 'quantitative',
                    axis: {
                        title: 'Value',
                        format: "~%"
                    },
                    sort: ["Non-question (你|您)好[啊]?", "Non-question (上午|下午|晚上|中午|早上)好[啊]?", "Question (你|您)(最近)?好[吗么没嘛啊]", "Question 吃[过]?[饭]?了[吗么没嘛啊]"]
                },
                color: {
                    field: 'regex',
                    type: 'nominal',
                    legend: { title: 'Greetings' },
                    scale: {
                        domain: ["Non-question (你|您)好[啊]?", "Non-question (上午|下午|晚上|中午|早上)好[啊]?", "Question (你|您)(最近)?好[吗么没嘛啊]", "Question 吃[过]?[饭]?了[吗么没嘛啊]"],
                        range: ["#42a5f5", "#0277bd", "#ff7043", "#c62828"], // Custom colors,
                        
                    }
                }
            }
        };

    </script>

</head>

<body>


    <div id="vis"></div>

    <script>
        vegaEmbed('#vis', spec);
    </script>
</body>