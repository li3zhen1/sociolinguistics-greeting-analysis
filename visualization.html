<head>
    <script src="https://cdn.jsdelivr.net/npm/vega@5.25.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.16.3"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.22.2"></script>
    <script>
        let data = {
            "1960": {
                "regex\u4f60\u597d": 0.6777777778,
                "regex\u4e0a\u5348\u4e0b\u5348\u665a\u4e0a\u4e2d\u5348\u65e9\u4e0a\u597d": 0.0333333333,
                "regex\u4f60\u597d\u5417": 0.2555555556,
                "regex\u5403\u4e86\u5417": 0.0333333333
            },
            "1970": {
                "regex\u4f60\u597d": 0.7115384615,
                "regex\u4e0a\u5348\u4e0b\u5348\u665a\u4e0a\u4e2d\u5348\u65e9\u4e0a\u597d": 0.0480769231,
                "regex\u4f60\u597d\u5417": 0.2307692308,
                "regex\u5403\u4e86\u5417": 0.0096153846
            },
            "1980": {
                "regex\u4f60\u597d": 0.761682243,
                "regex\u4e0a\u5348\u4e0b\u5348\u665a\u4e0a\u4e2d\u5348\u65e9\u4e0a\u597d": 0.0957943925,
                "regex\u4f60\u597d\u5417": 0.1168224299,
                "regex\u5403\u4e86\u5417": 0.0257009346
            },
            "1990": {
                "regex\u4f60\u597d": 0.7534626039,
                "regex\u4e0a\u5348\u4e0b\u5348\u665a\u4e0a\u4e2d\u5348\u65e9\u4e0a\u597d": 0.0470914127,
                "regex\u4f60\u597d\u5417": 0.1745152355,
                "regex\u5403\u4e86\u5417": 0.0249307479
            },
            "2000": {
                "regex\u4f60\u597d": 0.7542662116,
                "regex\u4e0a\u5348\u4e0b\u5348\u665a\u4e0a\u4e2d\u5348\u65e9\u4e0a\u597d": 0.1296928328,
                "regex\u4f60\u597d\u5417": 0.0819112628,
                "regex\u5403\u4e86\u5417": 0.0341296928
            },
            "2010": {
                "regex\u4f60\u597d": 0.8072519084,
                "regex\u4e0a\u5348\u4e0b\u5348\u665a\u4e0a\u4e2d\u5348\u65e9\u4e0a\u597d": 0.1106870229,
                "regex\u4f60\u597d\u5417": 0.0610687023,
                "regex\u5403\u4e86\u5417": 0.0209923664
            },
            "2020": {
                "regex\u4f60\u597d": 0.8346153846,
                "regex\u4e0a\u5348\u4e0b\u5348\u665a\u4e0a\u4e2d\u5348\u65e9\u4e0a\u597d": 0.0769230769,
                "regex\u4f60\u597d\u5417": 0.0653846154,
                "regex\u5403\u4e86\u5417": 0.0230769231
            }
        }
        let transformedData = [];

        for (const year in data) {
            for (const regex in data[year]) {
                transformedData.push({
                    year: year,
                    regex: regex,
                    value: data[year][regex]
                });
            }
        }

        const spec = {
            $schema: 'https://vega.github.io/schema/vega-lite/v5.json',
            description: 'Stacked Area Chart',
            data: {
                values: transformedData
            },
            width: 600,
            height: 200,
            mark: 'area',
            encoding: {
                x: {
                    field: 'year',
                    type: 'ordinal',
                    axis: {
                        title: 'Year',
                        labelAngle: -45
                    }
                },
                y: {
                    field: 'value',
                    type: 'quantitative',
                    axis: {
                        title: 'Value',
                        format: "~%"
                    }
                },
                color: {
                    field: 'regex',
                    type: 'nominal',
                    legend: { title: 'Regex Type' },
                    scale: {
                        domain: ["regex你好", "regex上午下午晚上中午早上好", "regex你好吗", "regex吃了吗"],
                        range: ["#42a5f5", "#0277bd", "#ff7043", "#c62828"] // Custom colors
                    }
                }
            }
        };

    </script>

</head>

<body>


    <div id="vis"></div>

    <script>
        vegaEmbed('#vis', spec);
    </script>
</body>