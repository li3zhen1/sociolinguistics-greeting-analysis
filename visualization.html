<head>
    <script src="https://cdn.jsdelivr.net/npm/vega@5.25.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.16.3"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.22.2"></script>
    <script>
        let raw = {
    "1960": {
        "regex\u4f60\u597d": 0.7818181818,
        "regex\u4e0a\u5348\u4e0b\u5348\u665a\u4e0a\u4e2d\u5348\u65e9\u4e0a\u597d": 0.0,
        "regex\u4f60\u597d\u5417": 0.1818181818,
        "regex\u5403\u4e86\u5417": 0.0363636364
    },
    "1970": {
        "regex\u4f60\u597d": 0.7115384615,
        "regex\u4e0a\u5348\u4e0b\u5348\u665a\u4e0a\u4e2d\u5348\u65e9\u4e0a\u597d": 0.0480769231,
        "regex\u4f60\u597d\u5417": 0.2307692308,
        "regex\u5403\u4e86\u5417": 0.0096153846
    },
    "1980": {
        "regex\u4f60\u597d": 0.7794117647,
        "regex\u4e0a\u5348\u4e0b\u5348\u665a\u4e0a\u4e2d\u5348\u65e9\u4e0a\u597d": 0.0931372549,
        "regex\u4f60\u597d\u5417": 0.1225490196,
        "regex\u5403\u4e86\u5417": 0.0049019608
    },
    "1990": {
        "regex\u4f60\u597d": 0.7874251497,
        "regex\u4e0a\u5348\u4e0b\u5348\u665a\u4e0a\u4e2d\u5348\u65e9\u4e0a\u597d": 0.0508982036,
        "regex\u4f60\u597d\u5417": 0.1467065868,
        "regex\u5403\u4e86\u5417": 0.0149700599
    },
    "2000": {
        "regex\u4f60\u597d": 0.7552447552,
        "regex\u4e0a\u5348\u4e0b\u5348\u665a\u4e0a\u4e2d\u5348\u65e9\u4e0a\u597d": 0.1328671329,
        "regex\u4f60\u597d\u5417": 0.0839160839,
        "regex\u5403\u4e86\u5417": 0.027972028
    },
    "2010": {
        "regex\u4f60\u597d": 0.8176470588,
        "regex\u4e0a\u5348\u4e0b\u5348\u665a\u4e0a\u4e2d\u5348\u65e9\u4e0a\u597d": 0.1137254902,
        "regex\u4f60\u597d\u5417": 0.0549019608,
        "regex\u5403\u4e86\u5417": 0.0137254902
    },
    "2020": {
        "regex\u4f60\u597d": 0.8443579767,
        "regex\u4e0a\u5348\u4e0b\u5348\u665a\u4e0a\u4e2d\u5348\u65e9\u4e0a\u597d": 0.0778210117,
        "regex\u4f60\u597d\u5417": 0.0661478599,
        "regex\u5403\u4e86\u5417": 0.0116731518
    }
}

let keys = [
'Non-interrogative "Hello!"',
'Non-interrogative "Good morning/afternoon/...!"',
'Interrogative "How are you doing?"',
'Interrogative "Have you eaten?"'
]
        Object.keys(raw).forEach(
            it => raw[it] = {
                'Non-interrogative "Hello!"': raw[it]["regex\u4f60\u597d"],
                'Non-interrogative "Good morning/afternoon/...!"': raw[it]["regex\u4e0a\u5348\u4e0b\u5348\u665a\u4e0a\u4e2d\u5348\u65e9\u4e0a\u597d"],
                'Interrogative "How are you doing?"': raw[it]["regex\u4f60\u597d\u5417"],
                'Interrogative "Have you eaten?"': raw[it]["regex\u5403\u4e86\u5417"]
            }
        )
        let data = raw;

        let transformedData = [];

        for (const year in data) {
            for (const regex in data[year]) {
                transformedData.push({
                    year: year,
                    regex: regex,
                    value: data[year][regex]
                });
            }
        }

        const spec = {
            $schema: 'https://vega.github.io/schema/vega-lite/v5.json',
            description: 'Stacked Area Chart',
            data: {
                values: transformedData
            },
            width: 360,
            height: 150,
            mark: 'area',
            encoding: {
                x: {
                    field: 'year',
                    type: 'ordinal',
                    axis: {
                        title: 'Year',
                        labelAngle: -45
                    }
                },
                y: {
                    field: 'value',
                    type: 'quantitative',
                    axis: {
                        title: 'Value',
                        format: "~%"
                    },
                    // sort: [3, 2, 1, 0].map(it => keys[it])
                },
                color: {
                    field: 'regex',
                    type: 'nominal',
                    legend: { title: 'Greetings' },
                    scale: {
                        domain: keys,
                        range: ["#42a5f5", "#0277bd", "#ff7043", "#c62828"], // Custom colors,

                    }
                }
            }
        };

    </script>

</head>

<body>


    <div id="vis"></div>

    <script>
        vegaEmbed('#vis', spec);
    </script>
</body>